
<!doctype html><html lang="de"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>DFS – Analyse (Supabase)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./styles/main.css">
</head><body>
<div class="container">
  <aside class="sidebar">
    <div class="brand">
      <img src="./assets/logo.png" alt="DFS">
      <div><div style="font-weight:600">DFS Analyse-Tool</div><div style="font-size:12px;color:#C0C0C0">Supabase</div></div>
    </div>
    <div class="nav">
      <button data-target="./modules/home/index.html" class="active">🏠 Übersicht</button>
      <button data-target="./modules/customer/index.html">👤 Kunden</button>
      <button data-target="./modules/contracts/index.html">📄 Verträge</button>
      <button data-target="./modules/print/index.html">🖨️ PDF</button>
    </div>
  </aside>
  <main class="main">
    <div class="topbar">
      <div>Projekt: <strong>Deutscher Finanzservice</strong></div>
      <div class="row">
        <button class="btn-outline" id="btn-keys">Supabase verbinden</button>
      </div>
    </div>
    <div class="iframe-wrap"><iframe id="content" src="./modules/home/index.html"></iframe></div>
  </main>
</div>
<div id="toast" class="toast"></div>
<script src="./scripts/storage.js"></script>
<script type="module" src="./scripts/supabase.js"></script>
<script>
  document.querySelectorAll('.nav button').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById('content').src = btn.getAttribute('data-target');
    });
  });
  document.getElementById('btn-keys').onclick = ()=>{
    const url = prompt('SUPABASE_URL? (https://...supabase.co)', localStorage.getItem('dfs.supabase.url')||'');
    if(!url) return;
    const key = prompt('SUPABASE_ANON_KEY? (public anon)', localStorage.getItem('dfs.supabase.key')||'');
    if(!key) return;
    window.DFS.setSupabaseKeys(url, key);
  };
</script>
</body></html>
